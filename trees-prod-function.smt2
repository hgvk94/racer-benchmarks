(set-logic HORN)
(declare-datatypes ((Tree 1)) ((par (k!00)((leaf) (node (left (Tree k!00)) (value k!00) (right (Tree k!00)))))))
(declare-fun prod ((Tree Int) Int) Bool)
(define-funs-rec ( ( prod ((x!1 (Tree Int))) Int))
                 ( (ite (= x!1 leaf)
                        0
                        (* (value x!1)
                           ((_ prod 0) (left x!1))
                           ((_ prod 0) (right x!1))))))
(assert (forall ((dummy Int)) (=> true (prod leaf 0))))
(assert (forall ((m Int) (n Int) (x Int) (txl (Tree Int)) (txr (Tree Int)))
  (=> (and (prod txl m) (prod txr n)) (prod (node txl x txr) (* m x n)))))
(assert (forall ((tx (Tree Int)) (n Int) (m Int))
  (=> (and (= ((_ prod 0) tx) m) (= ((_ prod 0) tx) n) (prod tx m) (prod tx n))
      (= m n))))
(check-sat)